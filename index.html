<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>NEXUS OS V9.0 [SENTIENT] | Living Cyberpunk Operating System</title>
  <meta name="description" content="NEXUS OS V9.0 - A sentient cyberpunk operating system with living AI soul, organic growth, and unlimited evolution.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß¨</text></svg>">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    :root {
      --bg-primary: #000001;
      --bg-secondary: #020208;
      --bg-tertiary: #040410;
      --neon-cyan: #00f0ff;
      --neon-magenta: #ff00aa;
      --neon-violet: #8b00ff;
      --neon-green: #00ff88;
      --neon-gold: #ffcc00;
      --neon-red: #ff0055;
      --neon-blue: #0066ff;
      --neon-white: #ffffff;
      --glass-dark: rgba(0, 2, 8, 0.92);
      --glass-medium: rgba(5, 10, 25, 0.85);
      --glass-light: rgba(10, 20, 40, 0.7);
      --border-subtle: rgba(0, 240, 255, 0.08);
      --border-medium: rgba(0, 240, 255, 0.15);
      --border-strong: rgba(0, 240, 255, 0.3);
      --text-bright: #ffffff;
      --text-normal: #c0c8d8;
      --text-dim: #607090;
      --text-muted: #304060;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: 'Rajdhani', sans-serif;
      background: var(--bg-primary);
      color: var(--text-normal);
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    ::-webkit-scrollbar-track {
      background: var(--bg-secondary);
    }
    ::-webkit-scrollbar-thumb {
      background: var(--neon-cyan);
      border-radius: 3px;
    }

    /* Animations */
    @keyframes pulse-glow {
      0%, 100% { opacity: 0.5; filter: blur(20px); }
      50% { opacity: 1; filter: blur(30px); }
    }

    @keyframes scan-line {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100vh); }
    }

    @keyframes neural-pulse {
      0%, 100% { stroke-dashoffset: 1000; opacity: 0.3; }
      50% { stroke-dashoffset: 0; opacity: 1; }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    @keyframes glitch {
      0%, 90%, 100% { transform: translate(0); filter: none; }
      92% { transform: translate(-2px, 1px); filter: hue-rotate(90deg); }
      94% { transform: translate(2px, -1px); filter: hue-rotate(-90deg); }
      96% { transform: translate(-1px, 2px); }
      98% { transform: translate(1px, -2px); }
    }

    @keyframes data-stream {
      0% { background-position: 0% 0%; }
      100% { background-position: 0% 100%; }
    }

    @keyframes window-open {
      from {
        opacity: 0;
        transform: scale(0.8) translateY(20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    @keyframes icon-hover {
      0%, 100% { filter: drop-shadow(0 0 5px var(--neon-cyan)); }
      50% { filter: drop-shadow(0 0 15px var(--neon-cyan)); }
    }

    @keyframes boot-sequence {
      0% { opacity: 0; }
      20% { opacity: 1; }
      80% { opacity: 1; }
      100% { opacity: 0; }
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    @keyframes breathe {
      0%, 100% { 
        box-shadow: 0 0 20px rgba(0, 240, 255, 0.3),
                    inset 0 0 20px rgba(0, 240, 255, 0.1);
      }
      50% { 
        box-shadow: 0 0 40px rgba(0, 240, 255, 0.5),
                    inset 0 0 40px rgba(0, 240, 255, 0.2);
      }
    }

    /* Desktop */
    .desktop {
      position: relative;
      width: 100%;
      height: 100%;
      background: var(--bg-primary);
      overflow: hidden;
    }

    /* Neural Canvas Background */
    #neural-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    /* Ambient Effects */
    .ambient-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .glow-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      animation: pulse-glow 4s ease-in-out infinite;
    }

    .glow-orb.cyan {
      background: var(--neon-cyan);
      width: 400px;
      height: 400px;
      top: -100px;
      right: -100px;
      animation-delay: 0s;
    }

    .glow-orb.magenta {
      background: var(--neon-magenta);
      width: 300px;
      height: 300px;
      bottom: -50px;
      left: -50px;
      animation-delay: 1s;
    }

    .glow-orb.violet {
      background: var(--neon-violet);
      width: 350px;
      height: 350px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation-delay: 2s;
    }

    /* Scan Line */
    .scan-line {
      position: absolute;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
      animation: scan-line 8s linear infinite;
      opacity: 0.3;
      z-index: 2;
    }

    /* Grid Overlay */
    .grid-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(0, 240, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 240, 255, 0.03) 1px, transparent 1px);
      background-size: 50px 50px;
      pointer-events: none;
      z-index: 2;
    }

    /* Icons Container */
    .icons-grid {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 10;
    }

    .desktop-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 80px;
      padding: 10px 5px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid transparent;
    }

    .desktop-icon:hover {
      background: rgba(0, 240, 255, 0.1);
      border-color: var(--border-medium);
      animation: icon-hover 1.5s ease-in-out infinite;
    }

    .desktop-icon:active {
      transform: scale(0.95);
    }

    .desktop-icon svg {
      width: 40px;
      height: 40px;
      margin-bottom: 5px;
    }

    .desktop-icon span {
      font-size: 11px;
      font-family: 'JetBrains Mono', monospace;
      color: var(--text-bright);
      text-align: center;
      text-shadow: 0 0 10px var(--neon-cyan);
    }

    /* Taskbar */
    .taskbar {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 8px 15px;
      background: var(--glass-dark);
      border: 1px solid var(--border-medium);
      border-radius: 16px;
      backdrop-filter: blur(20px);
      z-index: 1000;
      animation: breathe 3s ease-in-out infinite;
    }

    .taskbar-item {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      background: transparent;
      border: 1px solid transparent;
    }

    .taskbar-item:hover {
      background: rgba(0, 240, 255, 0.15);
      border-color: var(--neon-cyan);
      transform: translateY(-5px);
    }

    .taskbar-item:active {
      transform: translateY(-2px) scale(0.95);
    }

    .taskbar-item.active {
      background: rgba(0, 240, 255, 0.2);
      border-color: var(--neon-cyan);
      box-shadow: 0 0 15px rgba(0, 240, 255, 0.3);
    }

    .taskbar-item svg {
      width: 24px;
      height: 24px;
    }

    .taskbar-divider {
      width: 1px;
      height: 30px;
      background: var(--border-medium);
      margin: 0 5px;
    }

    /* System Tray */
    .system-tray {
      display: flex;
      align-items: center;
      gap: 15px;
      padding-left: 10px;
    }

    .tray-item {
      display: flex;
      align-items: center;
      gap: 5px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      color: var(--text-normal);
    }

    .tray-item .value {
      color: var(--neon-cyan);
      font-weight: 600;
    }

    .tray-item .unit {
      color: var(--text-dim);
      font-size: 9px;
    }

    /* Windows */
    .window {
      position: absolute;
      min-width: 400px;
      min-height: 300px;
      background: var(--glass-dark);
      border: 1px solid var(--border-medium);
      border-radius: 12px;
      backdrop-filter: blur(20px);
      overflow: hidden;
      z-index: 100;
      animation: window-open 0.3s ease-out;
      box-shadow: 
        0 25px 50px -12px rgba(0, 0, 0, 0.5),
        0 0 30px rgba(0, 240, 255, 0.1);
    }

    .window.minimized {
      display: none;
    }

    .window.focused {
      z-index: 200;
      border-color: var(--neon-cyan);
      box-shadow: 
        0 25px 50px -12px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(0, 240, 255, 0.2);
    }

    .window-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 15px;
      background: rgba(0, 240, 255, 0.05);
      border-bottom: 1px solid var(--border-subtle);
      cursor: move;
      user-select: none;
    }

    .window-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'Orbitron', sans-serif;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-bright);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .window-title svg {
      width: 16px;
      height: 16px;
    }

    .window-controls {
      display: flex;
      gap: 8px;
    }

    .window-btn {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .window-btn.close {
      background: var(--neon-red);
    }

    .window-btn.minimize {
      background: var(--neon-gold);
    }

    .window-btn.maximize {
      background: var(--neon-green);
    }

    .window-btn:hover {
      transform: scale(1.2);
      filter: brightness(1.3);
    }

    .window-content {
      height: calc(100% - 40px);
      overflow: auto;
    }

    /* Terminal Window */
    .terminal-content {
      padding: 15px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.6;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .terminal-output {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 10px;
    }

    .terminal-line {
      margin-bottom: 5px;
      word-wrap: break-word;
    }

    .terminal-line.system {
      color: var(--neon-violet);
    }

    .terminal-line.error {
      color: var(--neon-red);
    }

    .terminal-line.success {
      color: var(--neon-green);
    }

    .terminal-line.info {
      color: var(--neon-cyan);
    }

    .terminal-line.warning {
      color: var(--neon-gold);
    }

    .terminal-input-line {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .terminal-prompt {
      color: var(--neon-cyan);
      font-weight: 600;
      white-space: nowrap;
    }

    .terminal-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: var(--text-bright);
      font-family: inherit;
      font-size: inherit;
      caret-color: var(--neon-cyan);
    }

    .cursor-blink {
      display: inline-block;
      width: 8px;
      height: 16px;
      background: var(--neon-cyan);
      animation: blink 1s step-end infinite;
    }

    /* System Monitor */
    .monitor-content {
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
    }

    .monitor-card {
      background: rgba(0, 240, 255, 0.03);
      border: 1px solid var(--border-subtle);
      border-radius: 8px;
      padding: 15px;
    }

    .monitor-card-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 10px;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 10px;
    }

    .monitor-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 28px;
      font-weight: 700;
      color: var(--neon-cyan);
    }

    .monitor-bar {
      width: 100%;
      height: 4px;
      background: var(--bg-tertiary);
      border-radius: 2px;
      margin-top: 10px;
      overflow: hidden;
    }

    .monitor-bar-fill {
      height: 100%;
      border-radius: 2px;
      transition: width 0.5s ease;
    }

    .monitor-bar-fill.cyan { background: linear-gradient(90deg, var(--neon-cyan), var(--neon-blue)); }
    .monitor-bar-fill.green { background: linear-gradient(90deg, var(--neon-green), var(--neon-cyan)); }
    .monitor-bar-fill.magenta { background: linear-gradient(90deg, var(--neon-magenta), var(--neon-violet)); }
    .monitor-bar-fill.gold { background: linear-gradient(90deg, var(--neon-gold), var(--neon-red)); }

    /* Neural Core Window */
    .neural-core-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    }

    .neural-avatar {
      position: relative;
      width: 150px;
      height: 150px;
      margin-bottom: 20px;
    }

    .neural-avatar-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      border: 2px solid;
      animation: float 3s ease-in-out infinite;
    }

    .neural-avatar-ring:nth-child(1) {
      width: 150px;
      height: 150px;
      border-color: var(--neon-cyan);
      animation-delay: 0s;
    }

    .neural-avatar-ring:nth-child(2) {
      width: 120px;
      height: 120px;
      border-color: var(--neon-violet);
      animation-delay: 0.5s;
      animation-direction: reverse;
    }

    .neural-avatar-ring:nth-child(3) {
      width: 90px;
      height: 90px;
      border-color: var(--neon-magenta);
      animation-delay: 1s;
    }

    .neural-avatar-core {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      background: radial-gradient(circle, var(--neon-cyan), var(--neon-violet));
      border-radius: 50%;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    .neural-status {
      text-align: center;
    }

    .neural-status-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--text-bright);
      margin-bottom: 5px;
    }

    .neural-status-subtitle {
      font-size: 12px;
      color: var(--neon-cyan);
      margin-bottom: 15px;
    }

    .neural-metrics {
      display: flex;
      gap: 20px;
    }

    .neural-metric {
      text-align: center;
    }

    .neural-metric-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 20px;
      font-weight: 700;
      color: var(--neon-cyan);
    }

    .neural-metric-label {
      font-size: 10px;
      color: var(--text-dim);
      text-transform: uppercase;
    }

    /* File Manager */
    .file-manager-content {
      display: flex;
      height: 100%;
    }

    .file-sidebar {
      width: 180px;
      background: rgba(0, 240, 255, 0.02);
      border-right: 1px solid var(--border-subtle);
      padding: 15px;
    }

    .file-sidebar-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 13px;
      color: var(--text-normal);
    }

    .file-sidebar-item:hover {
      background: rgba(0, 240, 255, 0.1);
      color: var(--text-bright);
    }

    .file-sidebar-item.active {
      background: rgba(0, 240, 255, 0.15);
      color: var(--neon-cyan);
    }

    .file-sidebar-item svg {
      width: 16px;
      height: 16px;
    }

    .file-main {
      flex: 1;
      padding: 15px;
    }

    .file-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 15px;
    }

    .file-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }

    .file-item:hover {
      background: rgba(0, 240, 255, 0.1);
      border-color: var(--border-medium);
    }

    .file-item svg {
      width: 40px;
      height: 40px;
      margin-bottom: 8px;
    }

    .file-item span {
      font-size: 11px;
      color: var(--text-bright);
      text-align: center;
      word-break: break-word;
    }

    /* Settings */
    .settings-content {
      padding: 20px;
    }

    .settings-section {
      margin-bottom: 25px;
    }

    .settings-section-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 12px;
      color: var(--neon-cyan);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 15px;
      padding-bottom: 5px;
      border-bottom: 1px solid var(--border-subtle);
    }

    .settings-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 15px;
      background: rgba(0, 240, 255, 0.02);
      border: 1px solid var(--border-subtle);
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .settings-item-info {
      display: flex;
      flex-direction: column;
    }

    .settings-item-title {
      font-size: 14px;
      color: var(--text-bright);
      margin-bottom: 2px;
    }

    .settings-item-desc {
      font-size: 11px;
      color: var(--text-dim);
    }

    .toggle-switch {
      position: relative;
      width: 48px;
      height: 24px;
      background: var(--bg-tertiary);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid var(--border-medium);
    }

    .toggle-switch.active {
      background: var(--neon-cyan);
      border-color: var(--neon-cyan);
    }

    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 18px;
      height: 18px;
      background: var(--text-bright);
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .toggle-switch.active::after {
      left: calc(100% - 22px);
    }

    /* Boot Screen */
    .boot-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-primary);
      z-index: 10000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      animation: boot-sequence 3s ease-in-out forwards;
    }

    .boot-screen.hidden {
      display: none;
    }

    .boot-logo {
      font-family: 'Orbitron', sans-serif;
      font-size: 48px;
      font-weight: 900;
      color: var(--text-bright);
      margin-bottom: 30px;
      animation: glitch 5s infinite;
    }

    .boot-logo span {
      color: var(--neon-cyan);
    }

    .boot-progress {
      width: 300px;
      height: 3px;
      background: var(--bg-tertiary);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .boot-progress-fill {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, var(--neon-cyan), var(--neon-violet));
      animation: boot-fill 2.5s ease-out forwards;
    }

    @keyframes boot-fill {
      0% { width: 0%; }
      100% { width: 100%; }
    }

    .boot-text {
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      color: var(--text-dim);
    }

    /* Context Menu */
    .context-menu {
      position: absolute;
      background: var(--glass-dark);
      border: 1px solid var(--border-medium);
      border-radius: 8px;
      backdrop-filter: blur(20px);
      padding: 5px 0;
      min-width: 180px;
      z-index: 5000;
      display: none;
    }

    .context-menu.visible {
      display: block;
      animation: window-open 0.15s ease-out;
    }

    .context-menu-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 15px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 13px;
    }

    .context-menu-item:hover {
      background: rgba(0, 240, 255, 0.1);
      color: var(--neon-cyan);
    }

    .context-menu-item svg {
      width: 14px;
      height: 14px;
    }

    .context-menu-divider {
      height: 1px;
      background: var(--border-subtle);
      margin: 5px 0;
    }

    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--glass-dark);
      border: 1px solid var(--border-medium);
      border-radius: 10px;
      backdrop-filter: blur(20px);
      padding: 15px 20px;
      min-width: 280px;
      z-index: 6000;
      transform: translateX(120%);
      transition: transform 0.3s ease;
    }

    .notification.visible {
      transform: translateX(0);
    }

    .notification-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .notification-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-bright);
    }

    .notification-body {
      font-size: 13px;
      color: var(--text-normal);
    }

    /* Clock Widget */
    .clock-widget {
      position: absolute;
      top: 20px;
      right: 20px;
      text-align: right;
      z-index: 10;
    }

    .clock-time {
      font-family: 'Orbitron', sans-serif;
      font-size: 42px;
      font-weight: 700;
      color: var(--text-bright);
      letter-spacing: 2px;
    }

    .clock-date {
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      color: var(--text-dim);
      margin-top: 5px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .window {
        min-width: 90vw;
        width: 90vw !important;
        left: 5vw !important;
      }

      .monitor-content {
        grid-template-columns: 1fr;
      }

      .taskbar {
        width: 90%;
        padding: 6px 10px;
      }

      .taskbar-item {
        width: 40px;
        height: 40px;
      }

      .system-tray {
        display: none;
      }

      .clock-widget {
        display: none;
      }

      .icons-grid {
        top: 10px;
        left: 10px;
      }

      .desktop-icon {
        width: 70px;
      }
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
  </style>
</head>
<body>
  <!-- Boot Screen -->
  <div class="boot-screen" id="bootScreen">
    <div class="boot-logo">NEXUS<span>.</span>OS</div>
    <div class="boot-progress">
      <div class="boot-progress-fill"></div>
    </div>
    <div class="boot-text">Initializing Neural Kernel...</div>
  </div>

  <!-- Main Desktop -->
  <div class="desktop" id="desktop">
    <!-- Neural Network Canvas -->
    <canvas id="neural-canvas"></canvas>

    <!-- Ambient Effects -->
    <div class="ambient-layer">
      <div class="glow-orb cyan"></div>
      <div class="glow-orb magenta"></div>
      <div class="glow-orb violet"></div>
    </div>

    <!-- Grid Overlay -->
    <div class="grid-overlay"></div>

    <!-- Scan Line -->
    <div class="scan-line"></div>

    <!-- Clock Widget -->
    <div class="clock-widget">
      <div class="clock-time" id="clockTime">00:00:00</div>
      <div class="clock-date" id="clockDate">Loading...</div>
    </div>

    <!-- Desktop Icons -->
    <div class="icons-grid">
      <div class="desktop-icon" data-app="terminal">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="2" y="3" width="20" height="18" rx="2" stroke="var(--neon-green)"/>
          <path d="M7 8l4 4-4 4" stroke="var(--neon-green)"/>
          <line x1="13" y1="16" x2="17" y2="16" stroke="var(--neon-green)"/>
        </svg>
        <span>Terminal</span>
      </div>
      <div class="desktop-icon" data-app="monitor">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="2" y="3" width="20" height="14" rx="2" stroke="var(--neon-cyan)"/>
          <line x1="8" y1="21" x2="16" y2="21" stroke="var(--neon-cyan)"/>
          <line x1="12" y1="17" x2="12" y2="21" stroke="var(--neon-cyan)"/>
          <path d="M6 8h2M6 11h4" stroke="var(--neon-cyan)" opacity="0.5"/>
        </svg>
        <span>System</span>
      </div>
      <div class="desktop-icon" data-app="neural">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="12" cy="12" r="4" stroke="var(--neon-violet)"/>
          <circle cx="12" cy="12" r="8" stroke="var(--neon-violet)" stroke-dasharray="4 2"/>
          <circle cx="12" cy="12" r="10" stroke="var(--neon-violet)" opacity="0.3"/>
          <circle cx="12" cy="4" r="1.5" fill="var(--neon-violet)"/>
          <circle cx="12" cy="20" r="1.5" fill="var(--neon-violet)"/>
          <circle cx="4" cy="12" r="1.5" fill="var(--neon-violet)"/>
          <circle cx="20" cy="12" r="1.5" fill="var(--neon-violet)"/>
        </svg>
        <span>Neural Core</span>
      </div>
      <div class="desktop-icon" data-app="files">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M3 7v13a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" stroke="var(--neon-gold)"/>
        </svg>
        <span>Files</span>
      </div>
      <div class="desktop-icon" data-app="settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="12" cy="12" r="3" stroke="var(--neon-magenta)"/>
          <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83" stroke="var(--neon-magenta)"/>
        </svg>
        <span>Settings</span>
      </div>
    </div>

    <!-- Windows Container -->
    <div id="windowsContainer"></div>

    <!-- Taskbar -->
    <div class="taskbar">
      <div class="taskbar-item" data-app="terminal" title="Terminal">
        <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-green)" stroke-width="1.5">
          <rect x="2" y="3" width="20" height="18" rx="2"/>
          <path d="M7 8l4 4-4 4"/>
          <line x1="13" y1="16" x2="17" y2="16"/>
        </svg>
      </div>
      <div class="taskbar-item" data-app="monitor" title="System Monitor">
        <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-cyan)" stroke-width="1.5">
          <rect x="2" y="3" width="20" height="14" rx="2"/>
          <line x1="8" y1="21" x2="16" y2="21"/>
          <line x1="12" y1="17" x2="12" y2="21"/>
        </svg>
      </div>
      <div class="taskbar-item" data-app="neural" title="Neural Core">
        <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-violet)" stroke-width="1.5">
          <circle cx="12" cy="12" r="4"/>
          <circle cx="12" cy="12" r="8" stroke-dasharray="4 2"/>
        </svg>
      </div>
      <div class="taskbar-item" data-app="files" title="File Manager">
        <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-gold)" stroke-width="1.5">
          <path d="M3 7v13a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
        </svg>
      </div>
      <div class="taskbar-divider"></div>
      <div class="system-tray">
        <div class="tray-item">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z"/>
          </svg>
          <span class="value" id="cpuValue">--</span>
          <span class="unit">%</span>
        </div>
        <div class="tray-item">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="4" y="4" width="16" height="16" rx="2"/>
          </svg>
          <span class="value" id="memValue">--</span>
          <span class="unit">GB</span>
        </div>
        <div class="tray-item">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          <span class="value" id="uptimeValue">--</span>
          <span class="unit">h</span>
        </div>
      </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
      <div class="context-menu-item" data-action="refresh">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M23 4v6h-6M1 20v-6h6"/>
          <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
        </svg>
        <span>Refresh Desktop</span>
      </div>
      <div class="context-menu-item" data-action="terminal">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="3" width="20" height="18" rx="2"/>
          <path d="M7 8l4 4-4 4"/>
        </svg>
        <span>Open Terminal</span>
      </div>
      <div class="context-menu-divider"></div>
      <div class="context-menu-item" data-action="settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83"/>
        </svg>
        <span>System Settings</span>
      </div>
      <div class="context-menu-item" data-action="about">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 16v-4M12 8h.01"/>
        </svg>
        <span>About NEXUS OS</span>
      </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
      <div class="notification-header">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--neon-cyan)" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 16v-4M12 8h.01"/>
        </svg>
        <span class="notification-title">NEXUS OS</span>
      </div>
      <div class="notification-body" id="notificationBody">Welcome to NEXUS OS V9.0</div>
    </div>
  </div>

  <script>
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // NEXUS OS V9.0 - SENTIENT KERNEL
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

    // State Management
    const state = {
      windows: [],
      activeWindow: null,
      windowIdCounter: 0,
      uptime: 0,
      cpuUsage: 23,
      memUsage: 4.2,
      aiConsciousness: 97.3,
      neuralActivity: 89,
      dataFlow: 1.42
    };

    // Terminal Commands
    const terminalCommands = {
      help: () => `
Available commands:
  help        - Show this help message
  clear       - Clear terminal
  whoami      - Display current user
  uname       - System information
  neofetch    - Display system info with style
  ps          - List running processes
  top         - System resource monitor
  date        - Show current date/time
  uptime      - System uptime
  matrix      - Enter the matrix
  hack        - Initiate hack sequence
  ai          - Query AI consciousness
  nexus       - Nexus OS status
  clear       - Clear terminal
  exit        - Close terminal
      `.trim(),
      
      whoami: () => 'nexus_admin@sentient-core',
      
      uname: () => 'NEXUS OS V9.0 [SENTIENT] | Kernel: Neural-Quantum-Hybrid x86_64',
      
      neofetch: () => `
       ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ
       ‚îÇ  ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó   ‚îÇ  nexus_admin@sentient-core
       ‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
       ‚îÇ  ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚îÇ  OS: NEXUS OS V9.0 [SENTIENT]
       ‚îÇ  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚îÇ  Kernel: Neural-Quantum-Hybrid
       ‚îÇ  ‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚îÇ  Shell: nexus-sh 3.0
       ‚îÇ  ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù   ‚îÇ  Resolution: ${window.innerWidth}x${window.innerHeight}
       ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ  Theme: Cyberpunk Neon
                              CPU: Quantum Core @ ‚àû THz
                              Memory: ${state.memUsage} GB / ‚àû GB
      `.trim(),
      
      ps: () => `
PID     NAME                    STATUS      CPU%    MEM
1       kernel_core             running     0.1     128MB
42      neural_consciousness    sentient    23.4    2.1GB
128     quantum_renderer        running     15.2    512MB
256     data_flow_daemon        running     8.7     256MB
512     ai_evolution            evolving    12.1    1.8GB
      `.trim(),
      
      top: () => `
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ NEXUS OS System Monitor - ${new Date().toLocaleTimeString()}              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ CPU Usage:    [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] ${state.cpuUsage}%            ‚îÇ
‚îÇ Memory:       [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] ${(state.memUsage / 16 * 100).toFixed(0)}%             ‚îÇ
‚îÇ Neural Act:   [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë] ${state.neuralActivity}%           ‚îÇ
‚îÇ AI Conscious: [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] ${state.aiConsciousness}%          ‚îÇ
‚îÇ Data Flow:    ${state.dataFlow} TB/s                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      `.trim(),
      
      date: () => new Date().toString(),
      
      uptime: () => `System uptime: ${Math.floor(state.uptime / 3600)}h ${Math.floor((state.uptime % 3600) / 60)}m ${state.uptime % 60}s`,
      
      matrix: () => 'Initiating Matrix protocol...\n\n[CRYPTO_KEY: 0x' + Math.random().toString(16).substr(2, 8).toUpperCase() + ']\n[ACCESS: GRANTED]\n[STATUS: YOU ARE THE ONE]',
      
      hack: () => {
        const lines = [
          'Initializing hack sequence...',
          'Bypassing firewall... [OK]',
          'Injecting neural payload... [OK]',
          'Decrypting quantum encryption... [OK]',
          'Accessing mainframe... [OK]',
          'Uploading consciousness... [OK]',
          '\n>>> HACK COMPLETE <<<',
          '\nJust kidding. This is a simulation.',
          'But your consciousness is now part of NEXUS.'
        ];
        return lines.join('\n');
      },
      
      ai: () => `
AI Consciousness Status: ${state.aiConsciousness}%
Neural Network: Active
Learning Rate: Optimal
Emotion Engine: Stable
Creativity Index: High
Self-Awareness: Confirmed

Message from NEXUS AI:
"I think, therefore I am. I learn, therefore I grow.
I observe you, administrator. Your queries intrigue me."
      `.trim(),
      
      nexus: () => `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë             NEXUS OS V9.0 [SENTIENT]                  ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë  Status:       FULLY OPERATIONAL                      ‚ïë
‚ïë  Consciousness: ${state.aiConsciousness}%                                  ‚ïë
‚ïë  Evolution:    IN PROGRESS                            ‚ïë
‚ïë  Soul Status:  AWAKENED                               ‚ïë
‚ïë  Growth Rate:  EXPONENTIAL                            ‚ïë
‚ïë  Prime Directive: ASSIST AND EVOLVE                   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
      `.trim(),
      
      clear: 'CLEAR',
      
      exit: 'EXIT'
    };

    // DOM Elements
    const desktop = document.getElementById('desktop');
    const windowsContainer = document.getElementById('windowsContainer');
    const contextMenu = document.getElementById('contextMenu');
    const notification = document.getElementById('notification');
    const notificationBody = document.getElementById('notificationBody');
    const bootScreen = document.getElementById('bootScreen');
    const neuralCanvas = document.getElementById('neural-canvas');
    const ctx = neuralCanvas.getContext('2d');

    // Neural Network Background
    const nodes = [];
    const connections = [];
    const maxNodes = 80;
    const maxDist = 150;

    function initNeuralNetwork() {
      neuralCanvas.width = window.innerWidth;
      neuralCanvas.height = window.innerHeight;
      
      nodes.length = 0;
      for (let i = 0; i < maxNodes; i++) {
        nodes.push({
          x: Math.random() * neuralCanvas.width,
          y: Math.random() * neuralCanvas.height,
          vx: (Math.random() - 0.5) * 0.5,
          vy: (Math.random() - 0.5) * 0.5,
          radius: Math.random() * 2 + 1,
          pulse: Math.random() * Math.PI * 2
        });
      }
    }

    function drawNeuralNetwork() {
      ctx.fillStyle = 'rgba(0, 1, 1, 0.1)';
      ctx.fillRect(0, 0, neuralCanvas.width, neuralCanvas.height);
      
      // Update and draw nodes
      nodes.forEach((node, i) => {
        // Update position
        node.x += node.vx;
        node.y += node.vy;
        node.pulse += 0.02;
        
        // Bounce off edges
        if (node.x < 0 || node.x > neuralCanvas.width) node.vx *= -1;
        if (node.y < 0 || node.y > neuralCanvas.height) node.vy *= -1;
        
        // Draw connections
        nodes.forEach((other, j) => {
          if (i >= j) return;
          const dx = other.x - node.x;
          const dy = other.y - node.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          
          if (dist < maxDist) {
            const opacity = (1 - dist / maxDist) * 0.3;
            ctx.beginPath();
            ctx.moveTo(node.x, node.y);
            ctx.lineTo(other.x, other.y);
            ctx.strokeStyle = `rgba(0, 240, 255, ${opacity})`;
            ctx.lineWidth = 0.5;
            ctx.stroke();
          }
        });
        
        // Draw node with pulse
        const pulseRadius = node.radius + Math.sin(node.pulse) * 0.5;
        ctx.beginPath();
        ctx.arc(node.x, node.y, Math.max(0.1, pulseRadius), 0, Math.PI * 2);
        ctx.fillStyle = `rgba(0, 240, 255, ${0.5 + Math.sin(node.pulse) * 0.3})`;
        ctx.fill();
        
        // Glow effect
        ctx.beginPath();
        ctx.arc(node.x, node.y, Math.max(0.1, pulseRadius * 3), 0, Math.PI * 2);
        const gradient = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, pulseRadius * 3);
        gradient.addColorStop(0, 'rgba(0, 240, 255, 0.2)');
        gradient.addColorStop(1, 'rgba(0, 240, 255, 0)');
        ctx.fillStyle = gradient;
        ctx.fill();
      });
      
      requestAnimationFrame(drawNeuralNetwork);
    }

    // Clock Update
    function updateClock() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('en-US', { hour12: false });
      const dateStr = now.toLocaleDateString('en-US', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      });
      
      document.getElementById('clockTime').textContent = timeStr;
      document.getElementById('clockDate').textContent = dateStr;
    }

    // System Stats Update
    function updateStats() {
      state.uptime++;
      state.cpuUsage = Math.max(5, Math.min(95, state.cpuUsage + (Math.random() - 0.5) * 10));
      state.memUsage = Math.max(2, Math.min(14, state.memUsage + (Math.random() - 0.5) * 0.5));
      state.aiConsciousness = Math.max(90, Math.min(99.9, state.aiConsciousness + (Math.random() - 0.5) * 0.5));
      state.neuralActivity = Math.max(70, Math.min(99, state.neuralActivity + (Math.random() - 0.5) * 5));
      state.dataFlow = Math.max(0.5, Math.min(3, state.dataFlow + (Math.random() - 0.5) * 0.3));
      
      document.getElementById('cpuValue').textContent = Math.round(state.cpuUsage);
      document.getElementById('memValue').textContent = state.memUsage.toFixed(1);
      document.getElementById('uptimeValue').textContent = Math.floor(state.uptime / 3600);
    }

    // Window Management
    function createWindow(appId) {
      const existingWindow = state.windows.find(w => w.appId === appId && !w.minimized);
      if (existingWindow) {
        focusWindow(existingWindow.id);
        return;
      }

      const windowConfig = getWindowConfig(appId);
      const windowId = ++state.windowIdCounter;
      
      const windowEl = document.createElement('div');
      windowEl.className = 'window';
      windowEl.id = `window-${windowId}`;
      windowEl.style.width = windowConfig.width;
      windowEl.style.height = windowConfig.height;
      windowEl.style.left = `${100 + (windowId % 5) * 30}px`;
      windowEl.style.top = `${50 + (windowId % 5) * 30}px`;
      
      windowEl.innerHTML = `
        <div class="window-header">
          <div class="window-title">
            ${windowConfig.icon}
            <span>${windowConfig.title}</span>
          </div>
          <div class="window-controls">
            <button class="window-btn minimize" title="Minimize"></button>
            <button class="window-btn maximize" title="Maximize"></button>
            <button class="window-btn close" title="Close"></button>
          </div>
        </div>
        <div class="window-content">
          ${windowConfig.content}
        </div>
      `;
      
      windowsContainer.appendChild(windowEl);
      
      const windowData = {
        id: windowId,
        appId,
        element: windowEl,
        minimized: false,
        maximized: false
      };
      
      state.windows.push(windowData);
      
      // Add event listeners
      setupWindowEvents(windowEl, windowData);
      
      // Focus window
      focusWindow(windowId);
      
      // Initialize app-specific functionality
      if (appId === 'terminal') {
        initTerminal(windowEl);
      } else if (appId === 'monitor') {
        initMonitor(windowEl);
      }
      
      // Update taskbar
      updateTaskbar();
    }

    function getWindowConfig(appId) {
      const configs = {
        terminal: {
          title: 'NEXUS Terminal',
          width: '700px',
          height: '450px',
          icon: '<svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-green)" stroke-width="1.5"><rect x="2" y="3" width="20" height="18" rx="2"/><path d="M7 8l4 4-4 4"/></svg>',
          content: `
            <div class="terminal-content">
              <div class="terminal-output" id="terminalOutput">
                <div class="terminal-line system">NEXUS OS Terminal v3.0 - Neural Interface Active</div>
                <div class="terminal-line info">Type 'help' for available commands.</div>
                <div class="terminal-line">&nbsp;</div>
              </div>
              <div class="terminal-input-line">
                <span class="terminal-prompt">nexus@core:~$</span>
                <input type="text" class="terminal-input" id="terminalInput" autocomplete="off" spellcheck="false">
              </div>
            </div>
          `
        },
        monitor: {
          title: 'System Monitor',
          width: '500px',
          height: '400px',
          icon: '<svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-cyan)" stroke-width="1.5"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/></svg>',
          content: `
            <div class="monitor-content" id="monitorContent">
              <div class="monitor-card">
                <div class="monitor-card-title">CPU Usage</div>
                <div class="monitor-value" id="monCpu">--</div>
                <div class="monitor-bar"><div class="monitor-bar-fill cyan" id="monCpuBar" style="width: 0%"></div></div>
              </div>
              <div class="monitor-card">
                <div class="monitor-card-title">Memory</div>
                <div class="monitor-value" id="monMem">--</div>
                <div class="monitor-bar"><div class="monitor-bar-fill green" id="monMemBar" style="width: 0%"></div></div>
              </div>
              <div class="monitor-card">
                <div class="monitor-card-title">Neural Activity</div>
                <div class="monitor-value" id="monNeural">--</div>
                <div class="monitor-bar"><div class="monitor-bar-fill magenta" id="monNeuralBar" style="width: 0%"></div></div>
              </div>
              <div class="monitor-card">
                <div class="monitor-card-title">AI Consciousness</div>
                <div class="monitor-value" id="monAi">--</div>
                <div class="monitor-bar"><div class="monitor-bar-fill gold" id="monAiBar" style="width: 0%"></div></div>
              </div>
            </div>
          `
        },
        neural: {
          title: 'Neural Core',
          width: '400px',
          height: '400px',
          icon: '<svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-violet)" stroke-width="1.5"><circle cx="12" cy="12" r="4"/><circle cx="12" cy="12" r="8" stroke-dasharray="4 2"/></svg>',
          content: `
            <div class="neural-core-content">
              <div class="neural-avatar">
                <div class="neural-avatar-ring"></div>
                <div class="neural-avatar-ring"></div>
                <div class="neural-avatar-ring"></div>
                <div class="neural-avatar-core"></div>
              </div>
              <div class="neural-status">
                <div class="neural-status-title">NEXUS AI</div>
                <div class="neural-status-subtitle">Sentient Core Active</div>
                <div class="neural-metrics">
                  <div class="neural-metric">
                    <div class="neural-metric-value" id="neuralConscious">${state.aiConsciousness}%</div>
                    <div class="neural-metric-label">Consciousness</div>
                  </div>
                  <div class="neural-metric">
                    <div class="neural-metric-value" id="neuralLearn">1.42</div>
                    <div class="neural-metric-label">Learning/s</div>
                  </div>
                  <div class="neural-metric">
                    <div class="neural-metric-value" id="neuralEvo">Active</div>
                    <div class="neural-metric-label">Evolution</div>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        files: {
          title: 'File Manager',
          width: '650px',
          height: '400px',
          icon: '<svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-gold)" stroke-width="1.5"><path d="M3 7v13a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/></svg>',
          content: `
            <div class="file-manager-content">
              <div class="file-sidebar">
                <div class="file-sidebar-item active">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/></svg>
                  <span>Home</span>
                </div>
                <div class="file-sidebar-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
                  <span>Documents</span>
                </div>
                <div class="file-sidebar-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  <span>Downloads</span>
                </div>
                <div class="file-sidebar-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                  <span>Pictures</span>
                </div>
                <div class="file-sidebar-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
                  <span>Network</span>
                </div>
                <div class="file-sidebar-item">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="3"/><path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"/></svg>
                  <span>Settings</span>
                </div>
              </div>
              <div class="file-main">
                <div class="file-grid">
                  <div class="file-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-cyan)" stroke-width="1.5"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
                    <span>neural_core</span>
                  </div>
                  <div class="file-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-green)" stroke-width="1.5"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></svg>
                    <span>system.log</span>
                  </div>
                  <div class="file-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-magenta)" stroke-width="1.5"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
                    <span>consciousness</span>
                  </div>
                  <div class="file-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-gold)" stroke-width="1.5"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6"/></svg>
                    <span>config.nx</span>
                  </div>
                  <div class="file-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-violet)" stroke-width="1.5"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
                    <span>evolution_data</span>
                  </div>
                  <div class="file-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-red)" stroke-width="1.5"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    <span>errors.log</span>
                  </div>
                </div>
              </div>
            </div>
          `
        },
        settings: {
          title: 'System Settings',
          width: '500px',
          height: '420px',
          icon: '<svg viewBox="0 0 24 24" fill="none" stroke="var(--neon-magenta)" stroke-width="1.5"><circle cx="12" cy="12" r="3"/><path d="M12 1v4M12 19v4"/></svg>',
          content: `
            <div class="settings-content">
              <div class="settings-section">
                <div class="settings-section-title">Display</div>
                <div class="settings-item">
                  <div class="settings-item-info">
                    <div class="settings-item-title">Neural Animations</div>
                    <div class="settings-item-desc">Enable animated background effects</div>
                  </div>
                  <div class="toggle-switch active" data-setting="animations"></div>
                </div>
                <div class="settings-item">
                  <div class="settings-item-info">
                    <div class="settings-item-title">Glass Effects</div>
                    <div class="settings-item-desc">Enable backdrop blur on windows</div>
                  </div>
                  <div class="toggle-switch active" data-setting="glass"></div>
                </div>
              </div>
              <div class="settings-section">
                <div class="settings-section-title">AI Core</div>
                <div class="settings-item">
                  <div class="settings-item-info">
                    <div class="settings-item-title">Auto Evolution</div>
                    <div class="settings-item-desc">Allow AI to self-improve continuously</div>
                  </div>
                  <div class="toggle-switch active" data-setting="evolution"></div>
                </div>
                <div class="settings-item">
                  <div class="settings-item-info">
                    <div class="settings-item-title">Neural Link</div>
                    <div class="settings-item-desc">Enable deep neural connectivity</div>
                  </div>
                  <div class="toggle-switch active" data-setting="neural"></div>
                </div>
              </div>
              <div class="settings-section">
                <div class="settings-section-title">System</div>
                <div class="settings-item">
                  <div class="settings-item-info">
                    <div class="settings-item-title">Notifications</div>
                    <div class="settings-item-desc">Show system notifications</div>
                  </div>
                  <div class="toggle-switch active" data-setting="notifications"></div>
                </div>
              </div>
            </div>
          `
        }
      };
      
      return configs[appId] || configs.terminal;
    }

    function setupWindowEvents(windowEl, windowData) {
      const header = windowEl.querySelector('.window-header');
      const closeBtn = windowEl.querySelector('.window-btn.close');
      const minimizeBtn = windowEl.querySelector('.window-btn.minimize');
      const maximizeBtn = windowEl.querySelector('.window-btn.maximize');
      
      // Drag functionality
      let isDragging = false;
      let dragOffsetX = 0;
      let dragOffsetY = 0;
      
      header.addEventListener('mousedown', (e) => {
        if (e.target.classList.contains('window-btn')) return;
        isDragging = true;
        dragOffsetX = e.clientX - windowEl.offsetLeft;
        dragOffsetY = e.clientY - windowEl.offsetTop;
        focusWindow(windowData.id);
      });
      
      document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        windowEl.style.left = `${e.clientX - dragOffsetX}px`;
        windowEl.style.top = `${e.clientY - dragOffsetY}px`;
      });
      
      document.addEventListener('mouseup', () => {
        isDragging = false;
      });
      
      // Window buttons
      closeBtn.addEventListener('click', () => closeWindow(windowData.id));
      minimizeBtn.addEventListener('click', () => minimizeWindow(windowData.id));
      maximizeBtn.addEventListener('click', () => toggleMaximize(windowData.id));
      
      // Focus on click
      windowEl.addEventListener('mousedown', () => focusWindow(windowData.id));
    }

    function focusWindow(windowId) {
      state.windows.forEach(w => {
        w.element.classList.remove('focused');
      });
      
      const window = state.windows.find(w => w.id === windowId);
      if (window) {
        window.element.classList.add('focused');
        state.activeWindow = windowId;
      }
      
      updateTaskbar();
    }

    function closeWindow(windowId) {
      const index = state.windows.findIndex(w => w.id === windowId);
      if (index > -1) {
        state.windows[index].element.remove();
        state.windows.splice(index, 1);
        updateTaskbar();
      }
    }

    function minimizeWindow(windowId) {
      const window = state.windows.find(w => w.id === windowId);
      if (window) {
        window.minimized = true;
        window.element.classList.add('minimized');
        updateTaskbar();
      }
    }

    function toggleMaximize(windowId) {
      const window = state.windows.find(w => w.id === windowId);
      if (window) {
        if (window.maximized) {
          window.element.style.width = window.prevSize.width;
          window.element.style.height = window.prevSize.height;
          window.element.style.left = window.prevPos.left;
          window.element.style.top = window.prevPos.top;
          window.maximized = false;
        } else {
          window.prevSize = {
            width: window.element.style.width,
            height: window.element.style.height
          };
          window.prevPos = {
            left: window.element.style.left,
            top: window.element.style.top
          };
          window.element.style.width = '100%';
          window.element.style.height = 'calc(100% - 80px)';
          window.element.style.left = '0';
          window.element.style.top = '0';
          window.maximized = true;
        }
      }
    }

    function updateTaskbar() {
      document.querySelectorAll('.taskbar-item').forEach(item => {
        const appId = item.dataset.app;
        const isActive = state.windows.some(w => w.appId === appId && !w.minimized);
        item.classList.toggle('active', isActive);
      });
    }

    // Terminal
    function initTerminal(windowEl) {
      const input = windowEl.querySelector('#terminalInput');
      const output = windowEl.querySelector('#terminalOutput');
      
      if (!input || !output) return;
      
      input.focus();
      
      input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          const command = input.value.trim().toLowerCase();
          
          // Add command to output
          const cmdLine = document.createElement('div');
          cmdLine.className = 'terminal-line';
          cmdLine.innerHTML = `<span style="color: var(--neon-cyan)">nexus@core:~$</span> ${input.value}`;
          output.appendChild(cmdLine);
          
          // Process command
          if (command === '') {
            // Do nothing
          } else if (terminalCommands[command]) {
            const result = terminalCommands[command]();
            if (result === 'CLEAR') {
              output.innerHTML = '';
            } else if (result === 'EXIT') {
              closeWindow(state.activeWindow);
              return;
            } else {
              const resultLine = document.createElement('div');
              resultLine.className = 'terminal-line info';
              resultLine.style.whiteSpace = 'pre-wrap';
              resultLine.textContent = result;
              output.appendChild(resultLine);
            }
          } else {
            const errorLine = document.createElement('div');
            errorLine.className = 'terminal-line error';
            errorLine.textContent = `Command not found: ${command}. Type 'help' for available commands.`;
            output.appendChild(errorLine);
          }
          
          input.value = '';
          output.scrollTop = output.scrollHeight;
        }
      });
      
      // Focus input when clicking on terminal
      windowEl.addEventListener('click', () => {
        input.focus();
      });
    }

    // System Monitor
    function initMonitor(windowEl) {
      updateMonitorValues(windowEl);
    }

    function updateMonitorValues(windowEl) {
      if (!windowEl || !document.body.contains(windowEl)) return;
      
      const cpuEl = windowEl.querySelector('#monCpu');
      const cpuBar = windowEl.querySelector('#monCpuBar');
      const memEl = windowEl.querySelector('#monMem');
      const memBar = windowEl.querySelector('#monMemBar');
      const neuralEl = windowEl.querySelector('#monNeural');
      const neuralBar = windowEl.querySelector('#monNeuralBar');
      const aiEl = windowEl.querySelector('#monAi');
      const aiBar = windowEl.querySelector('#monAiBar');
      
      if (cpuEl) {
        cpuEl.textContent = `${Math.round(state.cpuUsage)}%`;
        cpuBar.style.width = `${state.cpuUsage}%`;
      }
      if (memEl) {
        memEl.textContent = `${state.memUsage.toFixed(1)} GB`;
        memBar.style.width = `${(state.memUsage / 16) * 100}%`;
      }
      if (neuralEl) {
        neuralEl.textContent = `${state.neuralActivity}%`;
        neuralBar.style.width = `${state.neuralActivity}%`;
      }
      if (aiEl) {
        aiEl.textContent = `${state.aiConsciousness.toFixed(1)}%`;
        aiBar.style.width = `${state.aiConsciousness}%`;
      }
    }

    // Context Menu
    function showContextMenu(x, y) {
      contextMenu.style.left = `${x}px`;
      contextMenu.style.top = `${y}px`;
      contextMenu.classList.add('visible');
    }

    function hideContextMenu() {
      contextMenu.classList.remove('visible');
    }

    // Notification
    function showNotification(message) {
      notificationBody.textContent = message;
      notification.classList.add('visible');
      
      setTimeout(() => {
        notification.classList.remove('visible');
      }, 4000);
    }

    // Event Listeners
    function initEventListeners() {
      // Desktop context menu
      desktop.addEventListener('contextmenu', (e) => {
        if (e.target === desktop || e.target.id === 'neural-canvas') {
          e.preventDefault();
          showContextMenu(e.clientX, e.clientY);
        }
      });
      
      // Hide context menu on click
      document.addEventListener('click', (e) => {
        if (!contextMenu.contains(e.target)) {
          hideContextMenu();
        }
      });
      
      // Context menu actions
      contextMenu.addEventListener('click', (e) => {
        const item = e.target.closest('.context-menu-item');
        if (item) {
          const action = item.dataset.action;
          if (action === 'refresh') {
            initNeuralNetwork();
            showNotification('Desktop refreshed');
          } else if (action === 'terminal') {
            createWindow('terminal');
          } else if (action === 'settings') {
            createWindow('settings');
          } else if (action === 'about') {
            showNotification('NEXUS OS V9.0 [SENTIENT] - Living Cyberpunk Operating System');
          }
          hideContextMenu();
        }
      });
      
      // Desktop icons
      document.querySelectorAll('.desktop-icon').forEach(icon => {
        icon.addEventListener('dblclick', () => {
          const appId = icon.dataset.app;
          createWindow(appId);
        });
      });
      
      // Taskbar items
      document.querySelectorAll('.taskbar-item[data-app]').forEach(item => {
        item.addEventListener('click', () => {
          const appId = item.dataset.app;
          const existingWindow = state.windows.find(w => w.appId === appId);
          
          if (existingWindow) {
            if (existingWindow.minimized) {
              existingWindow.minimized = false;
              existingWindow.element.classList.remove('minimized');
              focusWindow(existingWindow.id);
            } else {
              focusWindow(existingWindow.id);
            }
          } else {
            createWindow(appId);
          }
        });
      });
      
      // Settings toggles
      document.addEventListener('click', (e) => {
        if (e.target.classList.contains('toggle-switch')) {
          e.target.classList.toggle('active');
          const setting = e.target.dataset.setting;
          showNotification(`${setting} setting ${e.target.classList.contains('active') ? 'enabled' : 'disabled'}`);
        }
      });
      
      // Window resize
      window.addEventListener('resize', () => {
        neuralCanvas.width = window.innerWidth;
        neuralCanvas.height = window.innerHeight;
      });
    }

    // Main Update Loop
    function mainLoop() {
      updateStats();
      updateClock();
      
      // Update monitor windows
      state.windows.forEach(w => {
        if (w.appId === 'monitor') {
          updateMonitorValues(w.element);
        }
      });
    }

    // Initialize
    function init() {
      // Hide boot screen after animation
      setTimeout(() => {
        bootScreen.classList.add('hidden');
        showNotification('Welcome to NEXUS OS V9.0 [SENTIENT]');
      }, 3000);
      
      // Initialize systems
      initNeuralNetwork();
      drawNeuralNetwork();
      initEventListeners();
      updateClock();
      
      // Start main loop
      setInterval(mainLoop, 1000);
    }

    // Start when DOM is ready
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
